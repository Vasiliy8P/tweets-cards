"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[114],{114:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(433),s=n(439),o=n(791),a=n(689),c=n(87),l=n(984),i=n(861),u=n(757),f=n.n(u),w=n(243);w.Z.defaults.baseURL="https://640d0e31b07afc3b0da6e662.mockapi.io";var d=function(){var e=(0,i.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("/tweets?page=".concat(t,"&limit=3"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.put("/tweets/".concat(t),{followers:n+1});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.put("/tweets/".concat(t),{followers:n-1});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=n(184),h=function(e){var t=e.tweet,n=t.tweets,r=t.followers,s=t.id,o=t.avatar,a=e.followingTweetsId,c=e.onClickFollowing;return(0,m.jsxs)("div",{className:"TweetCard",children:[(0,m.jsx)("img",{className:"TweetCard__picture",src:"../img/picture2.png",alt:"background-img"}),(0,m.jsx)("img",{className:"TweetCard__logo",src:"../img/LogoJPG.jpg",alt:"logo"}),(0,m.jsx)("img",{className:"TweetCard__rectangle",src:"../img/rectangle.png",alt:"rectangle"}),(0,m.jsx)("img",{className:"TweetCard__user-photo",src:o,alt:"user"}),(0,m.jsx)("img",{className:"TweetCard__ellipse",src:"../img/ellipse.png",alt:"ellipse"}),(0,m.jsxs)("p",{className:"TweetCard__tweets-counter",children:[" ",n," tweets"]}),(0,m.jsxs)("p",{className:"TweetCard__followers-counter",children:[" ",r," followers"]}),(0,m.jsx)("button",{className:a.includes(s)?"TweetCard__btn-following":"TweetCard__btn-follow",type:"button",onClick:function(){return c(s,r)},children:a.includes(s)?"following":"Follow"})]})},_=n(643),x=function(){return(0,m.jsx)(_.g4,{height:"80",width:"80",radius:"9",color:"#4B2A99",ariaLabel:"three-dots-loading",wrapperStyle:{display:"flex",justifyContent:"center"},visible:!0})},b=function(){var e,t,n=(0,o.useState)([]),i=(0,s.Z)(n,2),u=i[0],f=i[1],w=(0,o.useState)(1),_=(0,s.Z)(w,2),b=_[0],v=_[1],j=(0,o.useState)(function(){var e=localStorage.getItem("followingTweets");return null!==e?JSON.parse(e):[]}()),T=(0,s.Z)(j,2),k=T[0],C=T[1],N=(0,o.useState)(null),Z=(0,s.Z)(N,2),y=Z[0],S=Z[1],L=null!==(e=null===(t=(0,a.TH)().state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/";(0,o.useEffect)((function(){S(!0),d(b).then((function(e){f((function(t){return[].concat((0,r.Z)(t),(0,r.Z)(e))})),S(!1)})).catch((function(e){return console.log(e.message)}))}),[b]),(0,o.useEffect)((function(){localStorage.setItem("followingTweets",JSON.stringify(k))}),[k]);var F=function(e,t){if(!k.includes(e))return C((function(t){return[].concat((0,r.Z)(t),[e])})),void function(e,t){p(e,t).then((function(e){f((function(t){return t.map((function(t){return t.id===e.id&&(t.followers=e.followers),t}))}))})).catch((function(e){return console.log(e.message)}))}(e,t);C((function(t){return(0,r.Z)(t.filter((function(t){return t!==e})))})),function(e,t){g(e,t).then((function(e){f((function(t){return t.map((function(t){return t.id===e.id&&(t.followers=e.followers),t}))}))})).catch((function(e){return console.log(e.message)}))}(e,t)};return(0,m.jsxs)(m.Fragment,{children:["  ",(0,m.jsx)(c.rU,{to:L,className:"Tweets-list__btn-back-link",children:(0,m.jsx)("button",{className:"Tweets-list__btn-back",type:"button",children:"Back"})}),(0,m.jsx)("ul",{className:"Tweets-list",children:u.map((function(e){return(0,m.jsx)("li",{className:"Tweets-list__item",children:(0,m.jsx)(h,{tweet:e,onClickFollowing:F,followingTweetsId:k})},(0,l.x0)())}))}),y&&(0,m.jsx)(x,{}),u.length>0&&!y&&(0,m.jsx)("button",{className:"Tweets-list__btn-LoadMore",type:"button",onClick:function(){v((function(e){return e+1}))},children:"Load more"})]})}}}]);
//# sourceMappingURL=114.206b6c23.chunk.js.map